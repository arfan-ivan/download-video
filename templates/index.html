<!DOCTYPE html>
<html lang="en">
<head>
    <title>Arfan nur Ivandi</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/favicon.ico') }}">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7369477489373926"
     crossorigin="anonymous"></script>

    <!-- Link CSS -->
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,700" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/open-iconic-bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/animate.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/owl.carousel.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/owl.theme.default.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/magnific-popup.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/aos.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/ionicons.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap-datepicker.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/jquery.timepicker.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/flaticon.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/icomoon.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <style>
        /* CSS untuk animasi loading */
        #loading {
            display: none;
            margin-top: 20px;
            font-size: 18px;
            color: #555;
        }

        #loading::after {
            content: '...';
            animation: ellipsis 1.5s infinite;
        }

        @keyframes ellipsis {
            0% { content: '...'; }
            33% { content: ''; }
            66% { content: '..'; }
            100% { content: '...'; }
        }

        #downloadLink {
            margin-top: 20px;
        }

        video {
            display: block;
            margin-top: 20px;
            max-width: 100%;
        }

        button {
            margin-top: 10px;
        }
    </style>

    <div id="colorlib-page">
        <a href="#" class="js-colorlib-nav-toggle colorlib-nav-toggle"><i></i></a>
        <aside id="colorlib-aside" role="complementary" class="js-fullheight text-center">
            <h1 id="colorlib-logo"><a href="https://arfanivan.my.id">Arfan<span>.</span></a></h1>
            <nav id="colorlib-main-menu" role="navigation">
                <ul>
                    <li class=""><a href="https://arfanivan.my.id">Home</a></li>
                    <li><a href="https://arfanivan.my.id/ilustrasi">Ilustrasi</a></li>
                    <li><a href="https://arfanivan.my.id/">Website</a></li>
                    <li><a href="https://arfanivan.my.id/">Project</a></li>
                    <li><a href="https://arfanivan.my.id/tentangsaya">Tentang Saya</a></li>
                </ul>
            </nav>

            <div class="colorlib-footer">
                <p><i class="icon-heart" aria-hidden="true"> </i><a href="https://www.instagram.com/4rfan_vn/" target="_blank">4rfan_vn</a></p>
                <ul>
                    <li><a href="#"><i class="icon-facebook"></i></a></li>
                    <li><a href="#"><i class="icon-twitter"></i></a></li>
                    <li><a href="#"><i class="icon-instagram"></i></a></li>
                    <li><a href="#"><i class="icon-linkedin"></i></a></li>
                </ul>
            </div>
        </aside> <!-- END COLORLIB-ASIDE -->
        <div id="colorlib-main">
            <section class="ftco-section contact-section">
                <div class="container">
                    <div class="row d-flex mb-5 contact-info">
                        <div class="col-md-12 mb-4">
                            <h2 class="h4 font-weight-bold">Unduh Gambar, Video, dan Audio Dari Multiplatform Termasuk Youtube, Instagram, Facebook, dan TikTok</h2>
                        </div>
                    </div>
                    <div class="row block-9">
                        <div class="col-md-6 order-md-last pr-md-5">
                            <form id="downloadForm">
                                <div class="form-group">
                                    <input style="width: 100%" type="text" id="video_url" name="video_url" placeholder="Paste URL video disini" required>
                                </div>
                                <div class="form-group">
                                    <input type="checkbox" id="download_image" name="download_image">
                                    <label for="download_image">Download gambar</label>
                                </div>
                                <div class="form-group">
                                    <input type="checkbox" id="download_audio" name="download_audio">
                                    <label for="download_audio">Download hanya audio (MP3)</label>
                                </div>
                                <div class="form-group">
                                    <input type="checkbox" id="download_video" name="download_video">
                                    <label for="download_video">Download video</label>
                                </div>
				<div class="form-group">
                                    <label for="resolution">Pilih Resolusi:</label>
                                    <select id="resolution" name="resolution" disabled>
                                        <option value="best">Pilih Resolusi</option>
                                        <option value="bytevc1_1080p_834143-0">1080p</option>
                                        <option value="bytevc1_720p_638433-0">720p</option>
                                        <option value="h264_540p_1235601-0">540p</option>
                                    </select>
                                </div>
                                <div id="loading">Memindai Konten</div> <!-- Animasi Loading -->
                                <div id="downloadLink"></div>
				<br>
                                <div class="form-group">
                                    <input type="submit" value="Generate" class="btn btn-primary py-3 px-5">
					<br>
                                    <p><small>Silahkan pilih Resolusi untuk menghindari error, dan Apabila loading terlalu lama, silahkan refresh halaman, dan tunggu beberapa detik, <i>khusus untuk file video proses pengumpulan informasi akan memakan waktu sedikit lebih lama, karena ukuran file yang di download, untuk mendownload file ukurang yang lebih besar silahkan download dari menu pada titik 3 di dalam preview video</i></small></p>
                                </div>
                            </form>
                        </div>
                        <div class="col-md-6">
                            <audio id="audioPreview" controls style="display:none;">
                                Your browser does not support the audio element.
                            </audio>                            
                            <img id="imagePreview" style="display:none; max-width: 100%; height: auto;" alt="Preview Image" />
                            <video style="width: 100%" id="videoPreview" controls></video> <!-- Video Preview -->
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- Include JS files -->
    <script>
        function updateFormState() {
            const downloadImage = document.getElementById('download_image').checked;
            const downloadAudio = document.getElementById('download_audio').checked;
            const downloadVideo = document.getElementById('download_video').checked;
            const resolution = document.getElementById('resolution');
            const generateButton = document.querySelector('input[type="submit"]');
    
            if (downloadImage) {
                document.getElementById('download_audio').checked = false;
                document.getElementById('download_video').checked = false;
                resolution.disabled = true;
            } else if (downloadAudio) {
                document.getElementById('download_image').checked = false;
                document.getElementById('download_video').checked = false;
                resolution.disabled = true;
            } else if (downloadVideo) {
                resolution.disabled = false;
            } else {
                resolution.disabled = true;
            }
    
            // Aktifkan atau nonaktifkan tombol "Generate" berdasarkan apakah salah satu checkbox tercentang
            if (downloadImage || downloadAudio || downloadVideo) {
                generateButton.disabled = false;
            } else {
                generateButton.disabled = true;
            }
        }
    
        document.getElementById('download_image').addEventListener('change', updateFormState);
        document.getElementById('download_audio').addEventListener('change', updateFormState);
        document.getElementById('download_video').addEventListener('change', updateFormState);
    
        document.getElementById('downloadForm').addEventListener('submit', function(event) {
            event.preventDefault();
    
            // Tampilkan animasi loading
            document.getElementById('loading').style.display = 'block';
            document.getElementById('downloadLink').innerHTML = '';
            document.getElementById('videoPreview').style.display = 'none';
            document.getElementById('imagePreview').style.display = 'none';
            document.getElementById('audioPreview').style.display = 'none';  // Hide audio preview initially
    
            const videoUrl = document.getElementById('video_url').value;
            const resolution = document.getElementById('resolution').value;
            const downloadAudio = document.getElementById('download_audio').checked;
            const downloadImage = document.getElementById('download_image').checked;
            const downloadVideo = document.getElementById('download_video').checked;
    
            fetch('/download', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    video_url: videoUrl,
                    resolution: resolution,
                    download_audio: downloadAudio,
                    download_image: downloadImage,
                    download_video: downloadVideo
                })
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('loading').style.display = 'none';
    
                if (data.status === 'success') {
                    const downloadLink = document.createElement('a');
                    downloadLink.href = data.file_url;
                    downloadLink.textContent = 'Klik di sini untuk Mendownload';
                    downloadLink.download = true;
    
                    document.getElementById('downloadLink').appendChild(downloadLink);
    
                    if (downloadVideo) {
                        const videoPreview = document.getElementById('videoPreview');
                        videoPreview.src = data.file_url;
                        videoPreview.style.display = 'block';
                        document.getElementById('imagePreview').style.display = 'none';
                        document.getElementById('audioPreview').style.display = 'none';
                    }
    
                    if (downloadImage) {
                        const imagePreview = document.getElementById('imagePreview');
                        imagePreview.src = data.file_url;
                        imagePreview.style.display = 'block';
                        document.getElementById('videoPreview').style.display = 'none';
                        document.getElementById('audioPreview').style.display = 'none';
                    }
    
                    if (downloadAudio) {
                        const audioPreview = document.getElementById('audioPreview');
                        audioPreview.src = data.file_url;
                        audioPreview.style.display = 'block';
                        document.getElementById('videoPreview').style.display = 'none';
                        document.getElementById('imagePreview').style.display = 'none';
                    }
                } else {
                    document.getElementById('downloadLink').textContent = data.message;
                }
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('loading').style.display = 'none';
                document.getElementById('downloadLink').textContent = 'Gagal memproses permintaan. Silakan coba lagi.';
            });
        });
    
        // Initialize form state on page load
        updateFormState();
    </script> 

    <script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery-migrate-3.0.1.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/popper.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery.easing.1.3.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery.waypoints.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery.stellar.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/owl.carousel.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery.magnific-popup.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/aos.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery.animateNumber.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/bootstrap-datepicker.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery.timepicker.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/scrollax.min.js') }}"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
    <script src="{{ url_for('static', filename='js/google-map.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>

</body>
</html>
